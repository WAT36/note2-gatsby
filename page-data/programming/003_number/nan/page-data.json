{"componentChunkName":"component---src-templates-note-js","path":"/programming/003_number/nan/","result":{"data":{"site":{"siteMetadata":{"title":"WAT Note(II)"}},"markdownRemark":{"id":"e6759013-bbba-51c1-a3f2-e9fdaa3e6a8e","excerpt":"NaNとは数値では無い値(Not a Number)のことを表す値で、プログラムで数値計算をする際に、正常な演算結果が得られなかったことを示す数値表現として用いられる。 例えば、0を0で除算した結果はNaNになる。（言語によっては、このような演算をした場合エラー出力をさせる場合もある） 以下、各言語におけるNaN…","html":"<p><strong>NaN</strong>とは数値では無い値(Not a Number)のことを表す値で、プログラムで数値計算をする際に、正常な演算結果が得られなかったことを示す数値表現として用いられる。</p>\n<p>例えば、0を0で除算した結果はNaNになる。（言語によっては、このような演算をした場合エラー出力をさせる場合もある）</p>\n<p>以下、各言語におけるNaNについてを記載する。</p>\n<div class=\"note_content_by_programming_language\" id=\"note_content_Java\">\n<p>Javaでは通常NaNが出る事はないが、数値演算のライブラリであるMathクラスを利用した演算でNaNが得られることがある。</p>\n<p>例えば負の数の平方根を求めたり、それこそ0を0で除算したりなどである。ただし、0除算は通常の場合実行時エラーが発生するので注意。</p>\n<p>例を以下に示す。</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Math</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Nan</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> args<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">//-2の平方根</span>\n        <span class=\"token keyword\">double</span> d1 <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">2.0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sqrt(\"</span> <span class=\"token operator\">+</span> d1 <span class=\"token operator\">+</span> <span class=\"token string\">\") == \"</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token function\">sqrt</span><span class=\"token punctuation\">(</span>d1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//0.0/0.0</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"0.0/0.0 == \"</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span><span class=\"token operator\">/</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//intだと実行時エラーが発生します</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"0/0 == \"</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token operator\">/</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>実行結果</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ java Nan\nsqrt(-2.0) == NaN\n0.0/0.0 == NaN\nException in thread \"main\" java.lang.ArithmeticException: / by zero\n        at Nan.main(Nan.java:12)</code></pre></div>\n<p>また、このNaNは自分自身及び全ての数値と等しくない性質を持つため、比較演算子で比較してもfalseになる。</p>\n<p>NaNであるかを判定するには、Double.isNaN()またはFloat.isNaN()メソッドを用いて判定する。</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">//(↑のコードのクラス内に追記する形で)</span>\n<span class=\"token comment\">//NaNの判定</span>\n<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Double</span><span class=\"token punctuation\">.</span><span class=\"token function\">isNaN</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span><span class=\"token operator\">/</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>実行結果</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">true</code></pre></div>\n</div>\n<div class=\"note_content_by_programming_language\" id=\"note_content_Python\">\n<p>Pythonでは通常はNaNが出る事はない。そのような値が出るような演算をした場合は、基本エラーが出力される。</p>\n<p>しかし、NumpyやPandasといったような、データ分析で用いられるライブラリではNaNが出力されることがよくある。</p>\n<p>また、通常の数値演算で出力されることもあるが、これらライブラリで用いられるNaNは冒頭で述べた意味とは違い、<strong>データが正しく読み取られなかった</strong>値（欠損値）という意味で使われることが多い。</p>\n<p>例えば以下のcsvをnumpyで読み取った結果を以下に示す。</p>\n<p>csv(test.csv)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1,2,,,3,4</code></pre></div>\n<p>python</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> \n<span class=\"token operator\">>></span><span class=\"token operator\">></span> a <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>genfromtxt<span class=\"token punctuation\">(</span><span class=\"token string\">'test.csv'</span><span class=\"token punctuation\">,</span> delimiter<span class=\"token operator\">=</span><span class=\"token string\">','</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span> <span class=\"token number\">1.</span>  <span class=\"token number\">2.</span> nan nan  <span class=\"token number\">3.</span>  <span class=\"token number\">4.</span><span class=\"token punctuation\">]</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token comment\">#値がなく正しく読み取られなかった箇所がnanとなる</span></code></pre></div>\n<p>意図的にNaNを出したい場合は、<code class=\"language-text\">numpy.nan</code>や<code class=\"language-text\">float('nan')</code>を使う。</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span><span class=\"token string\">'nan'</span><span class=\"token punctuation\">)</span>\nnan\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> </code></pre></div>\n<p>この欠損値NaNは、自分自身及び全ての数値と等しくない性質を持つため、比較演算子で比較してもfalseになる。</p>\n<p>値がNaNであるかを判定するには、<code class=\"language-text\">numpy.isnan()</code>か<code class=\"language-text\">math.isnan()</code>を利用する。</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token comment\">#↑の続き</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">import</span> math\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> math<span class=\"token punctuation\">.</span>isnan<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token boolean\">True</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> math<span class=\"token punctuation\">.</span>isnan<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token boolean\">False</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> </code></pre></div>\n</div>\n<div class=\"note_content_by_programming_language\" id=\"note_content_Javascript\">\n<p>Javascriptでは例の通り、0を0で除算するなど、数値では表せない不正な値を表現する際にNaNが使われる。</p>\n<p>また、このNaNは自分自身及び全ての数値と等しくない性質を持つため、比較演算子で比較してもfalseになる。</p>\n<p>また、グローバルオブジェクトの**isNaN()**を使用すると、NaNかどうかを判定できる。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> nan <span class=\"token operator\">=</span> <span class=\"token number\">0</span> <span class=\"token operator\">/</span> <span class=\"token number\">0</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>nan<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>nan <span class=\"token operator\">==</span> <span class=\"token number\">NaN</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">isNaN</span><span class=\"token punctuation\">(</span>nan<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>実行結果</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">NaN\nfalse\ntrue</code></pre></div>\n</div>","frontmatter":{"title":"NaN","date":"October 13, 2019","description":"NaN(非数)について","tags":["Java","Python","Javascript"]}}},"pageContext":{"id":"e6759013-bbba-51c1-a3f2-e9fdaa3e6a8e"}},"staticQueryHashes":["2841359383","3257411868"]}